{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Eitan Koren\\\\oop2\\\\ap2\\\\src\\\\chatScreen\\\\AddNewChat.js\";\nimport conversations from '../db/Conversations';\nimport users from '../db/UsersDataBase';\nimport LeftScreen from './LeftScreen'; // function ChooseNewChat({logInUsername, conversationsList}) {\n\nimport { createElement as _createElement } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddNewChat(logInUsername, conversationsList, newContact) {\n  var isRegisteredUser = false; // If the user entered his contact's identifier username, do nothing. \n\n  if (logInUsername == newContact) {\n    return;\n  }\n\n  for (var i = 0; i < Object.keys(conversationsList).length; i++) {\n    // If the user already have a conversation with this contact, do nothing.\n    if (conversationsList[i].usernameInChat == newContact) {\n      return;\n    }\n  }\n\n  var user;\n\n  for (var i = 0; i < Object.keys(users).length; i++) {\n    // If the user already have a conversation with this contact, do nothing.\n    if (logInUsername == users[i].username) {\n      user = users[i];\n    }\n  }\n\n  var newConversation;\n\n  for (var i = 0; i < Object.keys(users).length; i++) {\n    // If the user already have a conversation with this contact, do nothing.\n    if (newContact == users[i].username) {\n      isRegisteredUser = true; //add its username, nickname, image\n\n      newConversation = {\n        users: [{\n          username: user.username,\n          nickname: user.nickname,\n          image: user.image\n        }, {\n          username: users[i].username,\n          nickname: users[i].nickname,\n          image: users[i].image\n        }],\n        messages: [{\n          type: \"\",\n          content: \"\",\n          createdAt: \"\"\n        }]\n      };\n    }\n  } //If the user is not registered, do nothing.\n\n\n  if (!isRegisteredUser) {\n    return;\n  } else {\n    var usernameInChat = \"\";\n    var lastMessage = \"\";\n    var time = \"\";\n    var image;\n    var type = \"\";\n    conversations.unshift(newConversation);\n    lastMessage = newConversation.messages[chats[i].messages.length - 1].content;\n    type = newConversation.messages[chats[i].messages.length - 1].type;\n    time = newConversation.messages[chats[i].messages.length - 1].createdAt;\n    image = newConversation.users[1].image;\n    relevantInfo.push({\n      usernameInChat: newContact,\n      type: type,\n      lastMessage: lastMessage,\n      time: time,\n      image: image\n    });\n    var conversationsList;\n    conversationsList = relevantInfo.map((conversation, key) => {\n      return /*#__PURE__*/_createElement(LeftChatItem, { ...conversation,\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 20\n        }\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n\n_c = AddNewChat;\nexport default AddNewChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddNewChat\");","map":{"version":3,"sources":["C:/Users/Eitan Koren/oop2/ap2/src/chatScreen/AddNewChat.js"],"names":["conversations","users","LeftScreen","AddNewChat","logInUsername","conversationsList","newContact","isRegisteredUser","i","Object","keys","length","usernameInChat","user","username","newConversation","nickname","image","messages","type","content","createdAt","lastMessage","time","unshift","chats","relevantInfo","push","map","conversation","key"],"mappings":"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","sourcesContent":["import conversations from '../db/Conversations';\r\nimport users from '../db/UsersDataBase';\r\nimport LeftScreen from './LeftScreen';\r\n\r\n// function ChooseNewChat({logInUsername, conversationsList}) {\r\nfunction AddNewChat(logInUsername, conversationsList, newContact) {\r\n    var isRegisteredUser = false;\r\n\r\n    // If the user entered his contact's identifier username, do nothing. \r\n    if(logInUsername == newContact){\r\n        return;\r\n    }\r\n    for (var i = 0; i < Object.keys(conversationsList).length; i++) {\r\n        // If the user already have a conversation with this contact, do nothing.\r\n        if(conversationsList[i].usernameInChat == newContact){\r\n            return;\r\n        }\r\n    }\r\n\r\n    var user;\r\n    for (var i = 0; i < Object.keys(users).length; i++) {\r\n        // If the user already have a conversation with this contact, do nothing.\r\n        if(logInUsername == users[i].username){\r\n            user = users[i];\r\n        }\r\n    }\r\n    var newConversation;\r\n    for (var i = 0; i < Object.keys(users).length; i++) {\r\n        // If the user already have a conversation with this contact, do nothing.\r\n        if(newContact == users[i].username){\r\n            isRegisteredUser = true;\r\n            //add its username, nickname, image\r\n            newConversation = {users: [{username: user.username, nickname: user.nickname, image: user.image},\r\n            {username: users[i].username, nickname: users[i].nickname, image: users[i].image}],\r\n            messages:[{type:\"\", content: \"\", createdAt: \"\"}]}\r\n        }\r\n    }\r\n    //If the user is not registered, do nothing.\r\n    if(!isRegisteredUser) {\r\n        return;\r\n    } else {\r\n        var usernameInChat = \"\";\r\n        var lastMessage = \"\";\r\n        var time = \"\";\r\n        var image;\r\n        var type = \"\";\r\n        conversations.unshift(newConversation);\r\n        lastMessage = newConversation.messages[chats[i].messages.length - 1].content;\r\n        type = newConversation.messages[chats[i].messages.length - 1].type;\r\n        time = newConversation.messages[chats[i].messages.length - 1].createdAt;\r\n        image = newConversation.users[1].image;\r\n        relevantInfo.push({ usernameInChat: newContact, type: type, lastMessage: lastMessage, time: time, image: image });\r\n        var conversationsList;\r\n        conversationsList = relevantInfo.map((conversation, key) => {\r\n            return <LeftChatItem {...conversation} key={key} />\r\n        });\r\n    }\r\n    return (\r\n        <div>\r\n\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default AddNewChat;"]},"metadata":{},"sourceType":"module"}